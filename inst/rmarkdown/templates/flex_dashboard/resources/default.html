<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"$if(lang)$ lang="$lang$" xml:lang="$lang$"$endif$>
<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
$for(author-meta)$
<meta name="author" content="$author-meta$" />
$endfor$

$if(date-meta)$
<meta name="date" content="$date-meta$" />
$endif$


<title>$if(title-prefix)$$title-prefix$ - $endif$$pagetitle$</title>

<meta property="og:title" content="$if(title-prefix)$$title-prefix$ - $endif$$pagetitle$" />

<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />

<link rel="icon" $if(favicon)$href="$favicon$"$else$href="data:image/x-icon;" type="image/x-icon"$endif$>

$if(highlighting-css)$
<style type="text/css">
$highlighting-css$
</style>
$endif$

<script type="text/javascript">
window.FlexDashboardComponents = [];
</script>

$for(header-includes)$
$header-includes$
$endfor$

$if(devel)$
<link rel="stylesheet" href="../rmarkdown/templates/flex_dashboard/resources/flexdashboard.css" type="text/css" />
<link rel="stylesheet" href="../rmarkdown/templates/flex_dashboard/resources/fillpage.css" type="text/css" />
<link rel="stylesheet" href="../rmarkdown/templates/flex_dashboard/resources/theme-$theme$.css" type="text/css" />
<script type="text/javascript" src="../rmarkdown/templates/flex_dashboard/resources/flexdashboard.js"></script>
<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
$endif$

$for(css)$
<link rel="stylesheet" href="$css$" $if(html5)$$else$type="text/css" $endif$/>
$endfor$

</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">

<button id="navbar-button" type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>

<span class="navbar-logo pull-left">
  $if(logo)$<img src="$logo$" class="navbar-logo"/>$endif$
</span>
<span class="navbar-brand">
  $if(title-prefix)$$title-prefix$ - $endif$$pagetitle$
  <span class="navbar-author">
  $if(author)$
  $author$$if(date)$ &mdash; $date$$endif$
  $else$
  $if(date)$
  $date$
  $endif$
  $endif$
  </span>
</span>

</div>
<div id="navbar" class="navbar-collapse collapse">
<ul class="nav navbar-nav navbar-left">
</ul>
<ul class="nav navbar-nav navbar-right">
</ul>
</div><!--/.nav-collapse-->
</div><!--/.container-->
</div><!--/.navbar-->

$for(include-before)$
$include-before$
$endfor$

<div id="dashboard-container">

$body$

</div>

<script>

// https://davidwalsh.name/javascript-debounce-function

// Returns a function, that, as long as it continues to be invoked, will not
// be triggered. The function will be called after it stops being called for
// N milliseconds. If `immediate` is passed, trigger the function on the
// leading edge, instead of the trailing.
function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
};

// Navbar padding adjustments
function addNavbarPadding() {
  var navHeight = $$(".navbar").first().outerHeight();
  var body = $$("body").first().css("padding-top", (navHeight + 8) + "px");
  var sidebar = $$(".section.sidebar").first().css("top", navHeight + "px");
}

$$(document).on("shiny:restyle", function() {
  setTimeout(addNavbarPadding, 200);
});

$$(document).ready(function() {
  // Wait until the navbar exists (for runtime: shiny) before scheduling
  // the addition of the navbar padding
  function waitForNavbar(func) {
    var navbarExists = $$(".navbar").length > 0;
    if (navbarExists) {
      setTimeout(func, 200);
      return;
    }
    setTimeout(waitForNavbar, 200);
  }
  waitForNavbar(addNavbarPadding);

  // add bootstrap table styles to pandoc tables
  var bs3 = $$.fn.tab.Constructor.VERSION.match(/^3/);
  var tableClass = bs3 ? 'table table-condensed' : 'table table-sm';
  $$('tr.header').parent('thead').parent('table').addClass(tableClass);

  // initialize mathjax
$if(mathjax-url)$
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src  = "$mathjax-url$";
  document.getElementsByTagName("head")[0].appendChild(script);
$endif$

});
</script>

$for(include-after)$
$include-after$
$endfor$

</body>
</html>
